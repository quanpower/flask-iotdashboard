{% extends "layouts/base3.html" %}


{% block aknk_css %}
{{ super() }}
<!-- VENDOR CSS -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/vendor/jquery-ui.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/vendor/font-awesome.css') }}">


<!-- APP CSS -->
<!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/overrides.css') }}"> -->

{% endblock %}

{% block aknk_js %}
{{ super() }}
<!-- VENDOR JS -->
    <script type=text/javascript src="{{
        url_for('static', filename='js/vendor/echarts-en.min.js') }}">
    </script>

   

{% endblock %}

{% block aknk_body %}
{{ super() }}

    <div class="container">

      <!-- FIRST ROW OF BLOCKS -->     
      <div class="row">

      <!-- USER PROFILE BLOCK -->
        <div class="col-sm-12 col-lg-12">
            <div class="dash-unit">
                <dtitle>历史曲线</dtitle>
                <hr>
                <div id="daq_value" style="width:600px; height: 400px;" >
                    
                </div>
            </div>
        </div>

      </div><!-- /row -->
      
      

     
      
    </div> <!-- /container -->



    <script type="text/javascript">
     $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    </script>


    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('daq_value'));

        var option = {

            xAxis: {
                type: 'category',
            },
            yAxis: {
                type: 'value'
            },
            series: [{
                data: [820, 932, 901, 934, 1290, 1330, 1320],
                type: 'line',
                smooth: true
            }]
        };

        setInterval(function (){
                        //异步加载数据
                        $(function(){
                            $.getJSON($SCRIPT_ROOT + '/channel_history/'+ {{ channel_id }}, function (data) {
                                console.log(data);
                                option.series[0].data = data;
                                myChart.setOption(option);

                            });
                        });
        },5000);
    </script>




{% endblock %}

